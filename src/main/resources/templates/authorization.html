<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head lang="en" th:replace="fragments/header :: header">
</head>

<body>
	<div th:replace="fragments/header :: navigation"></div>


	<div class="site-wrapper">
		<div class="site-wrapper-inner">
			<div class="cover-container">
				<div class="container login" id="loginForm">

					<div class="row">
						<form class="well form-horizontal" th:action="@{/login}"
							method="POST">

							<fieldset>
								<legend>
									<center>
										<h3>
											<b>Sign In form</b>
										</h3>
									</center>
								</legend>
								<br>

								<div class="form-group ">
									<div class="col-md-12 inputGroupContainer">
										<span style="display: inline-block;" th:if="${param.error}"
											class="alert alert-danger">Invalid account name or
											password. </span> <span class="alert alert-info"
											th:if="${param.logout}"> You have been logged out. </span>

										<div class="input-group">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-user"></i></span> <input type="text"
												name="username" id="username" class="form-control"
												autofocus="true" placeholder="Account Name">
										</div>
									</div>
								</div>

								<div class="form-group">

									<div class="col-md-12 inputGroupContainer">
										<div class="input-group">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-user"></i></span> <input
												class="form-control" type="password" id="password"
												name="password" placeholder="Password">
										</div>

									</div>
								</div>

								<div class="row">
									<div>
										<input type="submit"
											class="align-items-center btn btn-lg btn-primary "
											value="Sign In" />
									</div>
								</div>
							</fieldset>
						</form>
						<p>Press on button bellow for registration new account</p>

					</div>
				</div>

				<div style="display: none" class="container register"
					id="registerForm">
					<form class="well form-horizontal" th:object="${account}"
						th:action="@{/registration}" method="POST"
						modelAttribute="account">
						<fieldset>
							<legend>
								<center>
									<h3>
										<b>Registration Form</b>
									</h3>
								</center>
							</legend>
							<br>

							<div class="form-group">
								<!-- Username -->
								<label class="control-label col-md-3" for="name">Account
									name</label>
								<div class="col-md-7 inputGroupContainer">
									<div class="input-group">
										<span class="input-group-addon"><i
											class="glyphicon glyphicon-user"></i></span> <input
											class="form-control" type="text" id="name" name="name"
											placeholder="" th:value="${account?.name}">
									</div>
									<span style="display: inline-block;" class="alert alert-danger"
										th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Error</span>
								</div>
							</div>

							<div class="form-group">
								<label class="control-label col-md-3" for="fullName">Full
									name</label>
								<div class="col-md-7 inputGroupContainer">
									<div class="input-group">
										<span class="input-group-addon"><i
											class="glyphicon glyphicon-user"></i></span> <input
											class="form-control" type="text" id="fullName"
											name="fullName">
									</div>
									<span style="display: inline-block;" class="alert alert-danger"
										th:if="${#fields.hasErrors('fullName')}"
										th:errors="*{fullName}" th:value="${account.fullName}">Error</span>
								</div>
							</div>

							<div class="form-group">
								<label class="control-label col-md-3" for="name">Password</label>
								<div class="col-md-7 inputGroupContainer">
									<div class="input-group">
										<span class="input-group-addon"><i
											class="glyphicon glyphicon-user"></i></span> <input
											class="form-control" type="password" name="password"
											id="passwordNew" th:value="${account.password}">
									</div>
									<span style="display: inline-block;" class="alert alert-danger"
										th:if="${#fields.hasErrors('password')}"
										th:errors="*{password}" th:value="${account.password}">Error</span>
								</div>

								<!-- <span style="display:inline-block;" class="alert alert-danger" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">Error</span> -->
							</div>


							<div class="text-center">
								<!-- Button -->
								<div class="controls">
									<button class="align-items-center btn btn-success btn-lg">Register</button>
								</div>
							</div>
						</fieldset>
					</form>
				</div>
				<input id="formType" type="checkbox" data-toggle="toggle"
					data-on="Registration" data-off="Login form" data-onstyle="success"
					data-offstyle="primary">
			</div>
		</div>
	</div>

	<script th:inline="javascript">
		$(function() {
			hasError = /*[[${#fields.hasErrors('account.*')}]]*/

			if(hasError){
				$("#loginForm").hide();
				$("#registerForm").show();
			
				$('#formType').prop('checked', true);
			}
			
			$("#formType").change(function() {
				let check = $("#formType").is(':checked');
				if (check) {
					$("#loginForm").hide();
					$("#registerForm").show();
					let userName = $("#username").val();
					let password = $("#password").val();
					
					$("#name").val(userName);
					$("#passwordNew").val(password);
					
				} else {
					$("#loginForm").show();
					$("#registerForm").hide();
				}
			});
		});
	</script>


</body>
</html>